<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>数据库逻辑 | josyaaa</title>
  <meta name="author" content="josyaaa">
  
  <meta name="description" content="检测、响应、事件响应
事件响应过程123graph TDA[system was working properly] --&amp;gt; B[user open suspicious email] --&amp;gt; C[sensors do not detect anything]C[sensors do n">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="数据库逻辑"/>
  <meta property="og:site_name" content="josyaaa"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/josyaaa/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/josyaaa/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/josyaaa/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/josyaaa/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/josyaaa/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/josyaaa/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/josyaaa/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/josyaaa/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-70812759-1', 'auto');
  ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?cb5448498d7169c668b07c2b255d62c1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<meta name="generator" content="Hexo 6.2.0"></head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/josyaaa/">josyaaa</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/josyaaa/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/josyaaa/categories" title="All the categories.">
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/josyaaa/tags" title="All the tags.">
			  <i class=""></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/josyaaa/about" title="About me.">
			  <i class=""></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> 数据库逻辑</h1>
		</div>
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <p>检测、响应、事件响应</p>
<h3 id="事件响应过程"><a href="#事件响应过程" class="headerlink" title="事件响应过程"></a>事件响应过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">A[system was working properly] --&gt; B[user open suspicious email] --&gt; C[sensors do not detect anything]</span><br><span class="line">C[sensors do not detect anything] --&gt; D[a user trying to authenticate from his mobile decvice reports that he is unable to aurhanticate] --&gt; E[help desk starts troublesing the issue] --&gt; F[since there are indications of compromise a security incident is created] --&gt; G[incident response continues from here]</span><br></pre></td></tr></table></figure>

<hr>
<table>
<thead>
<tr>
<th>日志</th>
<th>攻击&#x2F;操作</th>
</tr>
</thead>
<tbody><tr>
<td>端点保护和操作系统日志可以帮助确定 IOC</td>
<td>网络钓鱼电子邮件</td>
</tr>
<tr>
<td>端点保护和操作系统日志可以帮助确定 IOC</td>
<td>横向移动，然后特权升级</td>
</tr>
<tr>
<td>服务器日志和网络捕获可以帮助确定 IOC</td>
<td>未经授权或恶意进程可以进取或修改数据</td>
</tr>
<tr>
<td>假设云和本地资源之间有防火墙，防火墙日志和网络捕获可以帮助确定 IOC</td>
<td>数据提取和提交指挥和控制</td>
</tr>
</tbody></table>
<hr>
<table>
<thead>
<tr>
<th>主题</th>
</tr>
</thead>
<tbody><tr>
<td>监控系统与传感器集成，以便在单个仪表板中可视化所有事件</td>
</tr>
<tr>
<td>检测和监控系统集成，帮助将执行多个恶意行为的点链接起来，以实现最终任务，数据提取和提交给指挥和控制</td>
</tr>
<tr>
<td>检测和分析有时并行进行</td>
</tr>
</tbody></table>
<hr>
<ul>
<li>现代数据库管理复杂程度与用于保护安全技术不匹配</li>
<li>数据库成熟的交互协议，SQL语句存在弱点的基础上制定安全策略</li>
<li>组织或机构缺少丰富知识体系的数据库安全管理人员</li>
<li>企业环境存储多数据库平台和多操作系统的兼容性构成一个异构环境</li>
<li>企业部分或全部数据存储到云上</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">A[数据库实用程序] --&gt; B[DDL处理器] --&gt; d1[(数据库表述表)]</span><br><span class="line">d2[(授权表)] --&gt; C[DBMS 事物管理器 文件管理器]</span><br><span class="line">d3[(并发访问表)] --&gt; C</span><br><span class="line">C --&gt; d4[(物理数据库)]</span><br><span class="line">d1[(数据库表述表)] --&gt; C[DBMS 事物管理器 文件管理器]</span><br><span class="line">D[DML和查询处理语言器] --&gt; C[DBMS 事物管理器 文件管理器]</span><br><span class="line">d1[(数据库表述表)] --&gt; D[DML和查询处理语言器]</span><br><span class="line">E[用户应用] --&gt; D[DML和查询处理语言器]</span><br><span class="line">F[用户查询] --&gt; D[DML和查询处理语言器]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>DDL&#x3D; 数据定义语言      DML&#x3D; 数据操作语言<br>授权表：用于确保用户具有执行数据库查询语句的权限<br>并发访问表：用于在同时执行冲突命令时避免产生冲突</p>
</blockquote>
<h3 id="Database-and-cloud-Managment-System-Security-mechanism"><a href="#Database-and-cloud-Managment-System-Security-mechanism" class="headerlink" title="Database and cloud Managment System Security mechanism"></a>Database and cloud Managment System Security mechanism</h3><ul>
<li>据库系统对于海量数据提供流高效的访问，这些需求超出了一般的基于OS的安全机制或独立的安全包所具有的能力</li>
<li>操作系统的安全机制一般控制对整个文件的读写访问，所以它可以用来控制收否允许用户读写某个文件（如人事文件）中的任何信息，但不能用来限制访问该文件中的具体记录或字段，然而DBMS却允许制定这种更精细的访问控制，它通常还能实现对更多命令施加访问控制，因此转为数据库系统设计并与其汇集成在一起的安全服务和安全机制是必须的。</li>
</ul>
<h3 id="SQLi"><a href="#SQLi" class="headerlink" title="SQLi"></a>SQLi</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[user] --&gt; B[internet] --&gt; d1[(route)] --&gt; d2[(firewall)] --&gt; d3[(switch)] --&gt; d4[wifi]</span><br><span class="line">d3[firewall] --&gt; f1&#123;Two way interaction link&#125;</span><br><span class="line">f1&#123;Two way interaction link&#125;  --&gt; |1| C1[web server]</span><br><span class="line">f1&#123;Two way interaction link&#125;  --&gt; |2| C2[web server]</span><br><span class="line">f1&#123;Two way interaction link&#125;  --&gt; |3| C3[web server]</span><br><span class="line">C1[web server] --&gt; D1[web application server]</span><br><span class="line">C2[web server] --&gt; D1[web application server]</span><br><span class="line">C3[web server] --&gt; D1[web application server]</span><br><span class="line">D1[web application server] --&gt; E1[Database server] --&gt; E2[Database]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>SQLi attack:<br>1.攻击者找到web的脆弱点，通过向web服务器发送命令来对数据库注入SQL。这些命令注入到被防火墙接受的网络流量中<br>2.web服务接受到恶意代码，然后发送给web应用服务器<br>3.web应用服务器接收到web服务器的恶意代码后，将其发送给数据库服务器<br>4.数据库服务器在数据库执行恶意代码，数据库从信用卡表中返回数据<br>5.web应用服务器动态地生成一个包含数据库信用卡详细信息的页面<br>6.web服务器向攻击者发送信用卡详细信息</p>
</blockquote>
<h3 id="SQLi-attack"><a href="#SQLi-attack" class="headerlink" title="SQLi attack"></a>SQLi attack</h3><ul>
<li><p>用户输入<br>通过精心构造用户输入来注入SQL命令，web应用程序以多种方式读取用户输入，多数采用HTTP GET or POST 请求发送到 Web 应用程序的表单提交。</p>
</li>
<li><p>服务器变量<br>服务器变量包含是HTTP头部、网络协议头部、环境变量等数据变量集合。可以伪造 HTTP 和网络报头中的值，可以利用此漏洞将数据直接放入报头。</p>
</li>
<li><p>二阶注入<br>SQL 的预防机制不够完善，会出现二阶注入，在二阶注入中，恶意用户可以利用系统或数据库中已存在的数据来触发一个 SQL 注入攻击来自系统本身的。</p>
</li>
<li><p>cookie<br>cookie用来恢复用户客户端的状态信息，由于客户端可以控制 cookie 所以可更改 cookie 的内容来构建 SQL 查询时修改查询的结构和功能</p>
</li>
<li><p>物理用户输入<br>RFID、条形码、图像是被技术扫描等然后发送到数据库系统的纸质形式</p>
</li>
</ul>
<h3 id="SQLi-attack-pulic"><a href="#SQLi-attack-pulic" class="headerlink" title="SQLi attack pulic"></a>SQLi attack pulic</h3><ul>
<li>inferential(带内)</li>
</ul>
<ol>
<li>重言式是将代码注入一个或多个永真的条件表达式</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$query = &quot; SELECT info FROM user WHERE name = &#x27;$_GET[&quot;name&quot;]&#x27; AND pwd = &#x27;$_GET[&quot;pwd&quot;]&#x27;&quot;;</span><br><span class="line">SELECT info FROM users WHERE name = &#x27; &#x27; OR 1=1 -- AND pwpd = &#x27;&#x27;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>行尾注释</p>
</li>
<li><p>捎带查询</p>
</li>
</ol>
<ul>
<li>out of band(推理)</li>
</ul>
<ol>
<li>非法&#x2F;逻辑错误查询（利用是应用服务器返回默认错误页面通常描述许多过多的细节内容）</li>
<li>盲SQL注入（允许攻击者推测数据库系统中的数据）</li>
</ol>
<ul>
<li>inband attack(带外)</li>
</ul>
<p>检索数据使用不同的通信信道</p>
<h3 id="SQLi-resoonse-measures"><a href="#SQLi-resoonse-measures" class="headerlink" title="SQLi resoonse measures"></a>SQLi resoonse measures</h3><ul>
<li>基于签名</li>
<li>基于异常</li>
<li>代码分析</li>
<li>运行阻断</li>
</ul>
<h3 id="attack"><a href="#attack" class="headerlink" title="attack"></a>attack</h3><p>sqlmap</p>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">

    
    
    <a href="/josyaaa/2022/05/12/design/" type="button" class="btn btn-default"><i
                class="fa fa-arrow-circle-o-left"></i> Prev</a>
    

    <a href="/josyaaa/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/josyaaa/2022/05/12/copy/" type="button" class="btn btn-default ">Next<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
    <h2 class="title">Comments</h2>

    
</section>


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2022-05-12 
	</div>
	

	<!-- categories -->
    

	<!-- tags -->
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2022 josyaaa
  
      when meets RED to BLUE ...<a href="https://josyaaa.github.io/" target="_blank">josyaaa's blog</a>,<a href="https://github.com/josyaaa?tab=repositories">josyaaa's github</a><a href="http://getbootstrap.com/" target="_blank"></a><a href="http://getbootstrap.com/" target="_blank"></a>.
     <br> SCDAD/BIG DATA/MALWARE <a href="http://github.com/wzpan/hexo-theme-freemind/"></a> most good at leading tech
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/josyaaa/js/jquery.imagesloaded.min.js"></script>
<script src="/josyaaa/js/gallery.js"></script>
<script src="/josyaaa/js/bootstrap.min.js"></script>
<script src="/josyaaa/js/main.js"></script>
<script src="/josyaaa/js/search.js"></script> 


<link rel="stylesheet" href="/josyaaa/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/josyaaa/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/josyaaa/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
